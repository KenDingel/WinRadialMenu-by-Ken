<UserControl x:Class="RadialMenu.Controls.TreeMenuEditor"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:RadialMenu.Controls">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
            <Button Content="Add Item" Command="{Binding AddMenuItemCommand}" Margin="0,0,4,0" Padding="8,4"/>
            <Button Content="Duplicate" Command="{Binding DuplicateMenuItemCommand}" Margin="0,0,4,0" Padding="8,4"/>
            <Button Content="Delete" Command="{Binding DeleteMenuItemCommand}" Margin="0,0,4,0" Padding="8,4"/>
            <Separator Margin="8,0"/>
            <Button Content="Move Up" Command="{Binding MoveUpCommand}" Margin="0,0,4,0" Padding="8,4"/>
            <Button Content="Move Down" Command="{Binding MoveDownCommand}" Margin="0,0,4,0" Padding="8,4"/>
            <Button Content="Indent" Command="{Binding IndentCommand}" Margin="0,0,4,0" Padding="8,4"/>
        </StackPanel>

        <!-- Tree View -->
        <TreeView Grid.Row="1" 
                  x:Name="MenuTreeView"
                  ItemsSource="{Binding Working.Menu}"
                  SelectedItemChanged="TreeView_SelectedItemChanged"
                  AllowDrop="True"
                  PreviewMouseLeftButtonDown="TreeView_PreviewMouseLeftButtonDown"
                  PreviewMouseMove="TreeView_PreviewMouseMove"
                  Drop="TreeView_Drop">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Submenu}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Icon}" FontSize="14" Margin="0,0,4,0"/>
                        <TextBlock Text="{Binding Label}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>

        <!-- Status -->
        <TextBlock Grid.Row="2" Text="{Binding MenuStatusText}" Margin="0,8,0,0" Foreground="Gray"/>
    </Grid>
</UserControl>

